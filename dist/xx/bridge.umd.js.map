{"version":3,"file":"bridge.umd.js","sources":["../lib/src/joycon2.ts","../lib/src/bridge.ts"],"sourcesContent":["/// <reference lib=\"dom\" />\n\n// WebBluetooth BLE Peripheral + JoyCon2 wrapper\n// The library exposes a Joycon2 class (default export) which handles BLE\n// connect/disconnect and parses incoming JoyCon2 packets into a `gJoyCon2Data`\n// object that matches the shape used by the sample app.\n\nexport interface SimpleParsedJoyCon2Data {\n  packetId: number;\n  buttons: number;\n  leftStick: number;\n  rightStick: number;\n  mouseX: number;\n  mouseY: number;\n  mouseUnknown: number;\n  mouseDistance: number;\n  magX: number;\n  magY: number;\n  magZ: number;\n  batteryVoltage: number;\n  batteryCurrent: number;\n  temperature: number;\n  accelX: number;\n  accelY: number;\n  accelZ: number;\n  gyroX: number;\n  gyroY: number;\n  gyroZ: number;\n  triggerL: number;\n  triggerR: number;\n}\n\nexport interface JoyCon2Data {\n  packetId: number;\n  buttonL: boolean;\n  buttonR: boolean;\n  buttonMinus: boolean;\n  buttonPlus: boolean;\n  buttonLStick: boolean;\n  buttonRStick: boolean;\n  buttonA: boolean;\n  buttonB: boolean;\n  buttonC: boolean;\n  buttonX: boolean;\n  buttonY: boolean;\n  buttonUp: boolean;\n  buttonDown: boolean;\n  buttonLeft: boolean;\n  buttonRight: boolean;\n  buttonCapture: boolean;\n  buttonHome: boolean;\n  buttonZR: boolean;\n  buttonZL: boolean;\n  buttonSR_R: boolean;\n  buttonSL_R: boolean;\n  buttonSR_L: boolean;\n  buttonSL_L: boolean;\n  leftStickX: number;\n  leftStickY: number;\n  rightStickX: number;\n  rightStickY: number;\n  mouseX: number;\n  mouseY: number;\n  mouseUnknown: number;\n  mouseDistance: number;\n  magX: number;\n  magY: number;\n  magZ: number;\n  batteryVoltage: number;\n  batteryCurrent: number;\n  temperature: number;\n  accelX: number;\n  accelY: number;\n  accelZ: number;\n  gyroX: number;\n  gyroY: number;\n  gyroZ: number;\n  triggerL: number;\n  triggerR: number;\n  simpleParsed: SimpleParsedJoyCon2Data;\n  rawData: Uint8Array;\n}\n\nconst DEFAULT_DATA: JoyCon2Data = {\n  packetId: 0,\n  buttonL: false,\n  buttonR: false,\n  buttonMinus: false,\n  buttonPlus: false,\n  buttonLStick: false,\n  buttonRStick: false,\n  buttonA: false,\n  buttonB: false,\n  buttonC: false,\n  buttonX: false,\n  buttonY: false,\n  buttonUp: false,\n  buttonDown: false,\n  buttonLeft: false,\n  buttonRight: false,\n  buttonCapture: false,\n  buttonHome: false,\n  buttonZR: false,\n  buttonZL: false,\n  buttonSR_R: false,\n  buttonSL_R: false,\n  buttonSR_L: false,\n  buttonSL_L: false,\n  leftStickX: 0,\n  leftStickY: 0,\n  rightStickX: 0,\n  rightStickY: 0,\n  mouseX: 0,\n  mouseY: 0,\n  mouseUnknown: 0,\n  mouseDistance: 0,\n  magX: 0,\n  magY: 0,\n  magZ: 0,\n  batteryVoltage: 0,\n  batteryCurrent: 0,\n  temperature: 0,\n  accelX: 0,\n  accelY: 0,\n  accelZ: 0,\n  gyroX: 0,\n  gyroY: 0,\n  gyroZ: 0,\n  triggerL: 0,\n  triggerR: 0,\n  simpleParsed: {\n    packetId: 0,\n    buttons: 0,\n    leftStick: 0,\n    rightStick: 0,\n    mouseX: 0,\n    mouseY: 0,\n    mouseUnknown: 0,\n    mouseDistance: 0,\n    magX: 0,\n    magY: 0,\n    magZ: 0,\n    batteryVoltage: 0,\n    batteryCurrent: 0,\n    temperature: 0,\n    accelX: 0,\n    accelY: 0,\n    accelZ: 0,\n    gyroX: 0,\n    gyroY: 0,\n    gyroZ: 0,\n    triggerL: 0,\n    triggerR: 0,\n  },\n  rawData: new Uint8Array(),\n};\n\n// Service/Characteristic UUIDs used by the example\nexport const SERVICE_UUID = \"ab7de9be-89fe-49ad-828f-118f09df7fd0\";\nexport const CHARACTERISTICS_UUID = \"ab7de9be-89fe-49ad-828f-118f09df7fd2\";\n\nfunction readUint24LE(dv: DataView, offset: number): number {\n  const b0 = dv.getUint8(offset);\n  const b1 = dv.getUint8(offset + 1);\n  const b2 = dv.getUint8(offset + 2);\n  return (b2 << 16) | (b1 << 8) | b0;\n}\n\n// Stick normalization helpers (same logic used in the example app)\nconst centerX = 2000, minX = 1000, maxX = 3000;\nconst centerY = 2000, minY = 1000, maxY = 3000;\nfunction normalizeStick(value: number, center: number, min: number, max: number): number {\n  if (value > center) {\n    const norm = (value - center) / (max - center);\n    return Math.min(norm, 1);\n  } else {\n    const norm = (value - center) / (center - min);\n    return Math.max(norm, -1);\n  }\n}\nfunction clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\nfunction round2(value: number): number {\n  return Math.round(value * 100) / 100;\n}\nfunction applyDeadzone(x: number, y: number, deadzone: number = 0.15): [number, number] {\n  const magnitude = Math.sqrt(x * x + y * y);\n  if (magnitude < deadzone) return [0, 0];\n  const scale = (magnitude - deadzone) / (1 - deadzone);\n  let normX = (x / magnitude) * scale;\n  let normY = (y / magnitude) * scale;\n  normX = clamp(round2(normX), -1, 1);\n  normY = clamp(round2(normY), -1, 1);\n  return [normX, normY];\n}\nfunction getStick(rawX: number, rawY: number): [number, number] {\n  let x = normalizeStick(rawX, centerX, minX, maxX);\n  let y = normalizeStick(rawY, centerY, minY, maxY);\n  return applyDeadzone(x, y, 0.15);\n}\n\nexport class JoyCon2Device extends EventTarget {\n  public data: JoyCon2Data = { ...DEFAULT_DATA };\n  // Use `any` for internal Bluetooth types so declaration build doesn't require\n  // the consumer to have WebBluetooth lib types installed.\n  private device: any | null = null;\n  private server: any | null = null;\n  private characteristic: any | null = null;\n\n  constructor() {\n    super();\n  }\n\n  async connect(): Promise<void> {\n    try {\n      const device = await (navigator as any).bluetooth.requestDevice({\n        filters: [\n          {\n            manufacturerData: [\n              {\n                companyIdentifier: 1363, // 0x0553\n                dataPrefix: new Uint8Array([0, 0, 0, 0, 0, 103, 32]),\n                mask: new Uint8Array([0, 0, 0, 0, 0, 0, 255]),\n              },\n            ],\n          },\n        ],\n        optionalServices: [SERVICE_UUID],\n      });\n      this.device = device;\n      this.server = await device.gatt?.connect() ?? null;\n      if (!this.server) throw new Error('GATT server not available');\n      const service = await this.server.getPrimaryService(SERVICE_UUID);\n      this.characteristic = await service.getCharacteristic(CHARACTERISTICS_UUID);\n      await this.characteristic.startNotifications();\n      this.characteristic.addEventListener('characteristicvaluechanged', (ev: Event) => {\n        const char = (ev.target as any) as { value?: DataView };\n        const dv = char.value! as DataView;\n        this.handleData(dv);\n      });\n      this.dispatchEvent(new CustomEvent('connected'));\n    } catch (err) {\n      this.dispatchEvent(new CustomEvent('error', { detail: err }));\n      throw err;\n    }\n  }\n\n  disconnect(): void {\n    if (this.device && this.device.gatt && this.device.gatt.connected) {\n      this.device.gatt.disconnect();\n    }\n    this.device = null;\n    this.server = null;\n    this.characteristic = null;\n    this.dispatchEvent(new CustomEvent('disconnected'));\n  }\n\n  onUpdate(cb: (data: JoyCon2Data) => void) {\n    this.addEventListener('update', () => cb(this.data));\n  }\n\n  private handleData(dv: DataView) {\n    this.data.rawData = new Uint8Array(dv.buffer);\n    this.data.simpleParsed = {\n      packetId: dv.getUint32(0x00, true),\n      buttons: dv.getUint32(0x04, true),\n      leftStick: readUint24LE(dv, 0x0A),\n      rightStick: readUint24LE(dv, 0x0D),\n      mouseX: dv.getInt16(0x10, true),\n      mouseY: dv.getInt16(0x12, true),\n      mouseUnknown: dv.getInt16(0x14, true),\n      mouseDistance: dv.getInt16(0x16, true),\n      magX: dv.getInt16(0x18, true),\n      magY: dv.getInt16(0x1A, true),\n      magZ: dv.getInt16(0x1C, true),\n      batteryVoltage: dv.getUint16(0x1F, true),\n      batteryCurrent: dv.getInt16(0x28, true),\n      temperature: dv.getInt16(0x2E, true),\n      accelX: dv.getInt16(0x30, true),\n      accelY: dv.getInt16(0x32, true),\n      accelZ: dv.getInt16(0x34, true),\n      gyroX: dv.getInt16(0x36, true),\n      gyroY: dv.getInt16(0x38, true),\n      gyroZ: dv.getInt16(0x3A, true),\n      triggerL: dv.getUint8(0x3C),\n      triggerR: dv.getUint8(0x3D),\n    };\n\n    // detailed parsed\n    this.data.packetId = this.data.simpleParsed.packetId;\n    this.data.buttonY = (this.data.simpleParsed.buttons & (1 << 0)) !== 0;\n    this.data.buttonX = (this.data.simpleParsed.buttons & (1 << 1)) !== 0;\n    this.data.buttonB = (this.data.simpleParsed.buttons & (1 << 2)) !== 0;\n    this.data.buttonA = (this.data.simpleParsed.buttons & (1 << 3)) !== 0;\n    this.data.buttonSR_R = (this.data.simpleParsed.buttons & (1 << 4)) !== 0;\n    this.data.buttonSL_R = (this.data.simpleParsed.buttons & (1 << 5)) !== 0;\n    this.data.buttonR = (this.data.simpleParsed.buttons & (1 << 6)) !== 0;\n    this.data.buttonZR = (this.data.simpleParsed.buttons & (1 << 7)) !== 0;\n    this.data.buttonMinus = (this.data.simpleParsed.buttons & (1 << 8)) !== 0;\n    this.data.buttonPlus = (this.data.simpleParsed.buttons & (1 << 9)) !== 0;\n    this.data.buttonRStick = (this.data.simpleParsed.buttons & (1 << 10)) !== 0;\n    this.data.buttonLStick = (this.data.simpleParsed.buttons & (1 << 11)) !== 0;\n    this.data.buttonHome = (this.data.simpleParsed.buttons & (1 << 12)) !== 0;\n    this.data.buttonCapture = (this.data.simpleParsed.buttons & (1 << 13)) !== 0;\n    this.data.buttonC = (this.data.simpleParsed.buttons & (1 << 14)) !== 0;\n    this.data.buttonDown = (this.data.simpleParsed.buttons & (1 << 16)) !== 0;\n    this.data.buttonUp = (this.data.simpleParsed.buttons & (1 << 17)) !== 0;\n    this.data.buttonRight = (this.data.simpleParsed.buttons & (1 << 18)) !== 0;\n    this.data.buttonLeft = (this.data.simpleParsed.buttons & (1 << 19)) !== 0;\n    this.data.buttonSR_L = (this.data.simpleParsed.buttons & (1 << 20)) !== 0;\n    this.data.buttonSL_L = (this.data.simpleParsed.buttons & (1 << 21)) !== 0;\n    this.data.buttonL = (this.data.simpleParsed.buttons & (1 << 22)) !== 0;\n    this.data.buttonZL = (this.data.simpleParsed.buttons & (1 << 23)) !== 0;\n    this.data.leftStickY = (this.data.simpleParsed.leftStick >> 12) & 0xfff;\n    this.data.leftStickX = this.data.simpleParsed.leftStick & 0xfff;\n    this.data.rightStickY = (this.data.simpleParsed.rightStick >> 12) & 0xfff;\n    this.data.rightStickX = this.data.simpleParsed.rightStick & 0xfff;\n    this.data.mouseX = this.data.simpleParsed.mouseX;\n    this.data.mouseY = this.data.simpleParsed.mouseY;\n    this.data.mouseUnknown = this.data.simpleParsed.mouseUnknown;\n    this.data.mouseDistance = this.data.simpleParsed.mouseDistance;\n    this.data.magX = this.data.simpleParsed.magX;\n    this.data.magY = this.data.simpleParsed.magY;\n    this.data.magZ = this.data.simpleParsed.magZ;\n    this.data.batteryVoltage = this.data.simpleParsed.batteryVoltage;\n    this.data.batteryCurrent = this.data.simpleParsed.batteryCurrent / 100.0;\n    this.data.temperature = 25.0 + this.data.simpleParsed.temperature / 127.0;\n    this.data.accelX = this.data.simpleParsed.accelX / 4096.0;\n    this.data.accelY = this.data.simpleParsed.accelY / 4096.0;\n    this.data.accelZ = this.data.simpleParsed.accelZ / 4096.0;\n    this.data.gyroX = (this.data.simpleParsed.gyroX / 48000.0) * 360.0;\n    this.data.gyroY = (this.data.simpleParsed.gyroY / 48000.0) * 360.0;\n    this.data.gyroZ = (this.data.simpleParsed.gyroZ / 48000.0) * 360.0;\n    this.data.triggerL = this.data.simpleParsed.triggerL;\n    this.data.triggerR = this.data.simpleParsed.triggerR;\n\n    [this.data.rightStickX, this.data.rightStickY] = getStick(this.data.rightStickX, this.data.rightStickY);\n    [this.data.leftStickX, this.data.leftStickY] = getStick(this.data.leftStickX, this.data.leftStickY);\n\n    this.dispatchEvent(new CustomEvent('update', { detail: this.data }));\n  }\n}\n\n// default export requested by the user: Joycon2 class which wraps JoyCon2Device\nexport class Joycon2 extends EventTarget {\n  private dev: JoyCon2Device;\n  constructor() {\n    super();\n    this.dev = new JoyCon2Device();\n    // re-dispatch device events\n    this.dev.addEventListener('update', (e: Event) => this.dispatchEvent(new CustomEvent('update', { detail: (e as CustomEvent).detail })));\n    this.dev.addEventListener('connected', (e) => this.dispatchEvent(new CustomEvent('connected')));\n    this.dev.addEventListener('disconnected', (e) => this.dispatchEvent(new CustomEvent('disconnected')));\n    this.dev.addEventListener('error', (e) => this.dispatchEvent(new CustomEvent('error', { detail: (e as CustomEvent).detail })));\n  }\n\n  async connect(): Promise<void> {\n    return this.dev.connect();\n  }\n\n  disconnect(): void {\n    return this.dev.disconnect();\n  }\n\n  get gJoyCon2Data(): JoyCon2Data {\n    return this.dev.data;\n  }\n\n  // Convenience boolean getters for common buttons so consumers can read\n  // `jc2.buttonUp` directly (useful for sketches / globals).\n  get buttonUp(): boolean {\n    return !!(this.dev && this.dev.data && this.dev.data.buttonUp);\n  }\n\n  get buttonDown(): boolean {\n    return !!(this.dev && this.dev.data && this.dev.data.buttonDown);\n  }\n\n  get buttonLeft(): boolean {\n    return !!(this.dev && this.dev.data && this.dev.data.buttonLeft);\n  }\n\n  get buttonRight(): boolean {\n    return !!(this.dev && this.dev.data && this.dev.data.buttonRight);\n  }\n\n  onUpdate(cb: (data: JoyCon2Data) => void) {\n    this.addEventListener('update', () => cb(this.gJoyCon2Data));\n  }\n}\n\n// no default export: package exposes named exports only (Joycon2, JoyCon2Device, etc.)\n","// bridge.ts\r\n// --- joycon2.ts を取り込む ---\r\nimport { Joycon2 } from './joycon2';\r\n\r\n// --- window へ登録（UMD用）---\r\ntry {\r\n  (window as any).JoyCon2 = Joycon2;\r\n  (window as any).Joycon2 = Joycon2;\r\n  console.log('joycon2 bridge: JoyCon2 constructor installed');\r\n} catch (e) {\r\n  console.warn('joycon2 bridge: failed to install JoyCon2 on window', e);\r\n}\r\n\r\n// --- ESMなどからも使えるよう export ---\r\nexport * from './joycon2';\r\n"],"names":["DEFAULT_DATA","SERVICE_UUID","CHARACTERISTICS_UUID","readUint24LE","dv","offset","b0","b1","centerX","minX","maxX","centerY","minY","maxY","normalizeStick","value","center","min","max","norm","clamp","round2","applyDeadzone","x","y","deadzone","magnitude","scale","normX","normY","getStick","rawX","rawY","JoyCon2Device","device","service","ev","err","cb","Joycon2","e"],"mappings":"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"}